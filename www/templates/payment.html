<ion-view class="filters">
    <ion-content>
        <div class="row subtitle filter" scroll="false">
            <div class="col col-100">
                <div class="left">
                    <span class="title-views">Métodos de pago</span>
                </div>
                <div class="center">
                    <br>
                </div>
                <div class="subtitle-right">
                    <i class="icon ion-locked"></i>
                </div>

            </div>
        </div>
        <content has-header="true" padding="true">

            <div class="list">
                <div ng-show="paymentType==0">
                    <div class="item padding">
                        <button class="button button-block button-positive" ng-click="setPaymentType(1)">
                            Pagar con Tarjeta de crédito
                        </button>
                    </div>
                    <!--<div class="item padding">-->
                        <!--<button class="button button-block button-positive" ng-click="setPaymentType(2)">-->
                            <!--Pagar con saldo paypal-->
                        <!--</button>-->
                    <!--</div>-->
                    <!--<div class="item padding">-->
                        <!--<button class="button button-block button-positive" ng-click="setPaymentType(3)">-->
                            <!--Pagar con tarjeta en paypal-->
                        <!--</button>-->
                    <!--</div>-->
                </div>
                <!--<div class="item padding" ng-show="paymentType!=0">-->
                    <!--<button class="button button-block button-positive" ng-click="setPaymentType(0)">-->
                        <!--Elegir otro método de pago-->
                    <!--</button>-->
                <!--</div>-->
            </div>

            <div class="list list-payment" ng-show="paymentType==1 || paymentType==3">
                <form name="paymentForm" novalidate ng-submit="makeCreditCardPayment(card, paymentForm)">
                    <div class="row row-payment">
                        <span class="gray-text">Resumen de su compra</span>
                    </div>
                    <div class="row padding-not-l-r">
                        <div class="col padding-not-l-r">
                            <label class="item item-input border-radius">
                                <span class="input-label input-label-payment">Producto: </span>
                                <span class=" span-left" >SUSCRIPCIÓN {{subscriptions}}</span>
                            </label>
                        </div>
                    </div>
                    <!--<ion-radio ng-model="card.lapse" name="cardLapse" ng-value="12">12 meses</ion-radio>-->
                    <!--<ion-radio ng-repeat="item in subscriptions"-->
                               <!--ng-init="card.lapse = 1"-->
                               <!--ng-value="item.value"-->
                               <!--name="cardLapse"-->
                               <!--ng-model="card.lapse"-->
                               <!--ng-change="hasChanged()">-->
                        <!--Suscripción de {{item.text}} - {{item.amount}}€ + IVA-->
                    <!--</ion-radio>-->

                    <div class="row padding-not-l-r">
                        <div class="col col-67 padding-not-l-r">
                            <label class="item item-input border-radius">
                                <span class="input-label input-label-payment">Total sin impuestos: </span>
                                <span class=" span-left">{{card.amount| number:2}}€</span>
                            </label>
                        </div>
                        <div class="col padding-not-l-r">
                            <label class="item item-input border-radius" style="margin-left: 5px!important;">
                                <span class="input-label input-label-payment">IVA: </span>
                                <span class=" span-left">{{card.iva| number:2}}€</span>
                            </label>
                        </div>
                    </div>

                    <div class="row padding-not-l-r">
                        <div class="col padding-not-l-r">
                            <label class="item item-input border-radius">
                                <span class="input-label input-label-payment">Importe total:</span>
                                <span class=" span-left" >{{card.total| number:2}}€</span>
                            </label>
                        </div>
                    </div>


                    <!--Mostrados sólo si el tipo de pago es 3-->
                    <label class="item item-input item-stacked-label" ng-show="paymentType==3">
                        <span class="input-label">Primer nombre</span>
                        <input type="text" ng-model="card.firstName" name="firstName" placeholder="Su nombre aquí..." maxlength="25">
                    </label>

                    <label class="item item-input item-stacked-label" ng-show="paymentType==3">
                        <span class="input-label">Primer apellido</span>
                        <input type="text" ng-model="card.lastName" name="lastName" placeholder="Su apellido aquí..." maxlength="25">
                    </label>
                    <!-- -->

                    <div class="row row-payment">
                        <span class="gray-text">Datos de su tarjeta</span>
                    </div>

                    <div class="row padding-not-l-r">
                        <div class="col padding-not-l-r">
                            <label class="item item-input border-radius">
                                <span class="input-label input-label-payment">Número de tarjeta: </span>
                                <input type="text" ng-model="card.number"
                                       style="padding-bottom: 0px!important; max-width: 100%!important;"
                                       class=" input-label-payment span-left"
                                       maxlength="19" cc-number cc-eager-type name="ccNumber" cc-type="card.cardType"
                                       cc-format placeholder="Ingrese el número de su tarjeta..." ng-required="true">
                            </label>
                        </div>
                    </div>

                    <div class="row padding-not-l-r">
                        <div class="col padding-not-l-r">
                            <label class="item item-input border-radius">
                                <span class="input-label input-label-payment">Tipo de tarjeta:</span>
                                <span class=" span-left"
                                      ng-if="paymentForm.ccNumber.$ccEagerType != ''">
                                    <img src="img/{{paymentForm.ccNumber.$ccEagerType}}.png" alt="">
                                </span>
                                <span class=" span-left"
                                      ng-if="!paymentForm.ccNumber.$ccEagerType">
                                    Se agregará automáticamente...
                                </span>
                            </label>
                        </div>
                    </div>

                    <!--<label class="item item-input">
                        <span class="input-label">Tipo de tarjeta</span>
                        &lt;!&ndash;<span>{{paymentForm.ccNumber.$ccEagerType || 'Se agregará automáticamente...'}}</span>&ndash;&gt;
                        <span><img src="img/Mastercard.png" alt=""></span>
                    </label>-->

                    <div class="row padding-not-l-r">
                        <div class="col padding-not-l-r">
                            <label class="item item-input border-radius">
                                <span class="input-label input-label-payment">CVC: </span>
                                <input class="input-label-payment span-left" type="text" ng-model="card.cvc" id="cvc"
                                       cc-cvc name="ccCvc" cc-type="paymentForm.ccNumber.$ccType">
                            </label>
                        </div>
                        <div class="col col-67 padding-not-l-r">
                            <label class="item item-input border-radius" style="margin-left: 5px!important;">
                                <span class="input-label input-label-payment">Caducidad: </span>
                                <input class="input-label-payment span-left" type="month" ng-model="card.exp_date">
                            </label>
                        </div>
                    </div>

                    <div class="row" style="margin-top: 20%!important;">
                        <div class="col">
                            <label>
                                <button type="submit" ng-dblclick="return;" ng-disabled="paymentForm.$invalid || buttonDisabled" class="button button-block button-positive">REALIZAR PAGO</button>
                            </label>
                        </div>
                    </div>

                </form>
            </div>


            <div class="list" ng-show="paymentType==2">
                <form name="paymentFormPaypal" class="padding" ng-submit="makePayPalPayment(card, true)">

                    <label class="item item-input">
                        <span class="input-label">Saldo en €</span>
                        <input type="number" ng-model="card.amount" name="cardAmount2" placeholder="Escriba el saldo a recargar...">
                    </label>

                    <div class="padding">
                        <button type="submit" class="button button-block button-positive">Procesar pago PayPal</button>
                    </div>
                </form>
            </div>


        </content>
    </ion-content>
</ion-view>
